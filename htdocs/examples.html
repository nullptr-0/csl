<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CSL Examples</title>
  <meta name="description" content="Real-world CSL schema examples: how CSL describes real-world configurations." />
  <link rel="icon" href="./CSL-no-bg.png" type="image/png" />

  <style>
    :root{
      color-scheme: light dark;
      --bg: #f6f8ff;
      --surface: #ffffff;
      --surface-2: rgba(255,255,255,0.72);
      --text: #0f172a;
      --muted: #475569;
      --border: rgba(15,23,42,0.12);
      --shadow: 0 18px 45px rgba(2,6,23,0.12);
      --shadow-soft: 0 10px 25px rgba(2,6,23,0.08);
      --brand: #2b5797;
      --accent: #4ec9b0;
      --radius: 18px;
      --radius-sm: 12px;
      --code-bg: rgba(2,6,23,0.06);
      --code-text: #0b1220;
      --container: 1120px;
      --ring: 0 0 0 4px rgba(78,201,176,0.25);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    }

    @media (prefers-color-scheme: dark){
      :root{
        --bg: #0b1020;
        --surface: rgba(17,24,39,0.92);
        --surface-2: rgba(17,24,39,0.72);
        --text: #e5e7eb;
        --muted: #a7b0c0;
        --border: rgba(229,231,235,0.14);
        --shadow: 0 18px 50px rgba(0,0,0,0.45);
        --shadow-soft: 0 10px 28px rgba(0,0,0,0.35);
        --code-bg: rgba(255,255,255,0.06);
        --code-text: #e5e7eb;
        --ring: 0 0 0 4px rgba(78,201,176,0.25);
      }
    }

    *{ box-sizing:border-box; }
    html,body{ min-height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(900px 520px at 15% -10%,
          rgba(78,201,176,0.40) 0%,
          rgba(78,201,176,0.18) 38%,
          rgba(78,201,176,0.00) 72%),
        radial-gradient(820px 520px at 85% 0%,
          rgba(43,87,151,0.45) 0%,
          rgba(43,87,151,0.20) 40%,
          rgba(43,87,151,0.00) 74%),
        radial-gradient(900px 740px at 70% 110%,
          rgba(78,201,176,0.22) 0%,
          rgba(78,201,176,0.10) 45%,
          rgba(78,201,176,0.00) 76%),
        var(--bg);
      line-height:1.65;
      background-attachment: fixed;
    }

    a{ color: inherit; text-decoration: none; }
    a:hover{ text-decoration: underline; text-decoration-thickness: 2px; text-underline-offset: 3px; }

    .container{ width:min(var(--container), calc(100% - 2rem)); margin:0 auto; }

    /* Header / nav */
    .site-header{
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(14px);
      background: linear-gradient(to bottom, rgba(255,255,255,0.65), rgba(255,255,255,0.25));
      border-bottom: 1px solid var(--border);
    }
    @media (prefers-color-scheme: dark){
      .site-header{
        background: linear-gradient(to bottom, rgba(11,16,32,0.75), rgba(11,16,32,0.35));
      }
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0.85rem 0;
      gap: 1rem;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 0.6rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      text-decoration:none;
    }
    .logo{
      width: 34px; height: 34px;
      border-radius: 10px;
      background: conic-gradient(from 210deg, var(--accent), var(--brand), var(--accent));
      box-shadow: var(--shadow-soft);
      display:inline-block;
    }
    .nav-links{
      display:flex;
      align-items:center;
      gap: 0.85rem;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    .nav-links a{
      padding: 0.45rem 0.65rem;
      border-radius: 10px;
      color: var(--muted);
      font-weight: 600;
      text-decoration: none;
    }
    .nav-links a:hover{
      background: rgba(78,201,176,0.10);
      color: var(--text);
      text-decoration:none;
      border: 1px solid rgba(78,201,176,0.3);
    }
    .nav-links a[data-active="true"]{
      background: rgba(78,201,176,0.18);
      color: var(--text);
      border: 1px solid rgba(78,201,176,0.3);
    }
    .nav-cta{
      display:flex; align-items:center; gap: 0.6rem;
    }
    .hamburger{
      display:none;
      padding: 0.55rem 0.65rem;
      border-radius: 12px;
      background: rgba(255,255,255,0.40);
      border: 1px solid var(--border);
      color: var(--text);
      cursor:pointer;
    }
    @media (prefers-color-scheme: dark){
      .hamburger{ background: rgba(17,24,39,0.55); }
    }

    /* Mobile nav */
    @media (max-width: 880px){
      .hamburger{ display:inline-flex; align-items:center; justify-content:center; }
      .nav-links{
        display:none;
        position:absolute;
        top: 64px;
        right: 0;
        left: 0;
        padding: 0.75rem;
        border-bottom: 1px solid var(--border);
        background: rgba(255,255,255,0.85);
        backdrop-filter: blur(14px);
      }
      @media (prefers-color-scheme: dark){
        .nav-links{ background: rgba(11,16,32,0.85); }
      }
      .nav-links[data-open="true"]{ display:flex; }
      .nav-links a{ width: 100%; }
    }

    /* Buttons */
    .button{
      display:inline-flex; align-items:center; justify-content:center; gap: 0.5rem;
      padding: 0.85rem 1.1rem; border-radius: 14px;
      border: 1px solid rgba(255,255,255,0);
      background: linear-gradient(135deg, var(--accent), var(--brand));
      color: white; font-weight: 800; text-decoration:none;
      box-shadow: var(--shadow-soft);
      transition: transform 140ms ease, box-shadow 140ms ease, filter 140ms ease;
      white-space: nowrap;
    }
    .button:hover{ text-decoration:none; transform: translateY(-1px); filter: brightness(1.05); box-shadow: var(--shadow); }
    .button:focus-visible{ outline:none; box-shadow: var(--shadow), var(--ring); }
    .button.secondary{ background: transparent; color: var(--text); border: 1px solid var(--border); box-shadow:none; }
    .button.secondary:hover{ background: rgba(255,255,255,0.55); }
    @media (prefers-color-scheme: dark){ .button.secondary:hover{ background: rgba(17,24,39,0.65); } }
    .button.small{ padding: 0.55rem 0.8rem; border-radius: 12px; font-weight: 800; font-size: 0.95rem; }

    /* page */
    main{ padding: 2.2rem 0 2.8rem; }
    .hero{
      border-radius: calc(var(--radius) + 6px);
      border: 1px solid var(--border);
      background: linear-gradient(180deg, var(--surface-2), rgba(255,255,255,0.42));
      box-shadow: var(--shadow);
      padding: 1.6rem 1.2rem 1.3rem;
    }
    @media (prefers-color-scheme: dark){
      .hero{ background: linear-gradient(180deg, rgba(17,24,39,0.85), rgba(17,24,39,0.65)); }
    }
    .hero h1{ margin:0; font-size: clamp(2rem, 3.2vw, 2.7rem); letter-spacing:-0.03em; }
    .hero p{ margin:0.55rem 0 0; color: var(--muted); font-weight: 600; max-width: 75ch; }

    .tabs{
      display:flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin: 1.2rem 0 0.9rem;
      border-bottom: 1px solid var(--border);
      padding-bottom: 0.9rem;
    }
    .tab{
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.5);
      color: var(--muted);
      font-weight: 900;
      border-radius: 999px;
      padding: 0.45rem 0.75rem;
      cursor:pointer;
    }
    @media (prefers-color-scheme: dark){
      .tab{ background: rgba(17,24,39,0.65); }
    }
    .tab[aria-selected="true"]{
      color: var(--text);
      background: rgba(78,201,176,0.20);
      border-color: rgba(78,201,176,0.45);
    }

    .example{ display:none; padding: 0.6rem 0 0; }
    .example[data-active="true"]{ display:block; animation: fadeIn 180ms ease; }
    @keyframes fadeIn { from {opacity:0; transform: translateY(6px);} to {opacity:1; transform: translateY(0);} }

    .split{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-top: 1rem;
    }
    @media (max-width: 900px){ .split{ grid-template-columns: 1fr; } }

    .panel{
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.65);
      box-shadow: var(--shadow-soft);
      overflow:hidden;
    }
    @media (prefers-color-scheme: dark){
      .panel{ background: rgba(17,24,39,0.65); }
    }
    .panel .hdr{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 0.75rem;
      padding: 0.7rem 0.85rem;
      border-bottom: 1px solid var(--border);
      background: rgba(255,255,255,0.65);
      font-weight: 900;
    }
    @media (prefers-color-scheme: dark){
      .panel .hdr{ background: rgba(17,24,39,0.7); }
    }
    pre{
      margin:0;
      padding: 1.05rem 0.9rem;
      overflow:auto;
      font-family: var(--mono);
      font-size: 0.95rem;
      line-height: 1.55;
      color: var(--code-text);
    }
    code.inline{
      font-family: var(--mono);
      background: var(--code-bg);
      color: var(--code-text);
      padding: 0.15rem 0.35rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      font-weight: 700;
      font-size: 0.92em;
    }
    .note{
      margin-top: 1rem;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: rgba(78,201,176,0.14);
      padding: 0.85rem 0.9rem;
      color: var(--muted);
      font-weight: 650;
    }

    /* Footer */
    footer{
      padding: 2.5rem 0 3rem;
      color: var(--muted);
    }
    .footer-card{
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.55);
      box-shadow: var(--shadow-soft);
      padding: 1.2rem 1.1rem;
      display:flex;
      justify-content:space-between;
      gap: 1rem;
      flex-wrap: wrap;
      align-items:center;
    }
    @media (prefers-color-scheme: dark){
      .footer-card{ background: rgba(17,24,39,0.65); }
    }
    .footer-links{
      display:flex;
      gap: 0.85rem;
      flex-wrap: wrap;
      font-weight: 700;
    }

    @media (prefers-reduced-motion: reduce){
      .button{ transition:none; }
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container">
      <nav class="nav" aria-label="Primary navigation">
        <a class="brand" href="./index.html" aria-label="CSL home">
          <img class="logo" src="./CSL.png" alt="CSL logo" aria-hidden="true">
          <span>CSL</span>
        </a>

        <button class="hamburger" type="button" aria-label="Toggle menu" aria-expanded="false" aria-controls="navLinks" onclick="toggleMenu(this)">☰</button>

        <div id="navLinks" class="nav-links" data-open="false">
          <a href="./index.html#features">Features</a>
          <a href="./index.html#tooling">Tooling</a>
          <a href="./index.html#get-started">Get started</a>
          <a href="./docs.html">Docs</a>
          <a href="./examples.html" data-active="true">Examples</a>
          <a href="https://github.com/nullptr-0/csl" target="_blank" rel="noopener">GitHub</a>
        </div>

        <div class="nav-cta">
          <a class="button small secondary" href="./docs.html">Read docs</a>
          <a class="button small" href="https://github.com/nullptr-0/csl" target="_blank" rel="noopener">Repo</a>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="hero">
      <h1>Real‑world examples</h1>
      <p>
        These are intentionally practical: how wildcard keys (<code class="inline">*:</code>), unions, and constraints map to popular configuration ecosystems.
      </p>

      <div class="tabs" role="tablist" aria-label="Example tabs">
        <button class="tab" role="tab" aria-selected="true" aria-controls="ex-docker" id="tab-docker" onclick="showExample('docker', this)">Docker Compose</button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="ex-gh" id="tab-gh" onclick="showExample('gh', this)">GitHub Actions</button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="ex-aws" id="tab-aws" onclick="showExample('aws', this)">AWS CloudFormation</button>
      </div>
    </div>

    <!-- Docker -->
    <section class="example" id="ex-docker" data-active="true" aria-labelledby="tab-docker">
      <h2 style="margin: 1.4rem 0 0.25rem; letter-spacing:-0.02em;">Docker Compose</h2>
      <p style="margin:0; color: var(--muted); font-weight: 650;">
        Wildcard service names and structured per-service constraints.
      </p>

      <div class="split">
        <div class="panel" data-copy-scope>
          <div class="hdr">
            <span>Typical YAML</span>
            <button class="button small secondary" type="button" data-copy-btn>Copy</button>
          </div>
          <pre><code data-copy-text>services:
  web:
    image: nginx:latest
    ports:
      - "80:80"
    environment:
      - NODE_ENV=production
    volumes:
      - ./app:/app</code></pre>
        </div>

        <div class="panel" data-copy-scope>
          <div class="hdr">
            <span>CSL schema</span>
            <button class="button small secondary" type="button" data-copy-btn>Copy</button>
          </div>
          <pre><code data-copy-text>config DockerCompose {
  services: {
    *: { // Wildcard service names
      image?: string @regex(".+:.+");
      build?: {
        context: string;
        dockerfile?: string;
      };
      ports?: string[] @regex("^\\d+:\\d+$");
      environment?: {
        *: string | number | boolean;
      };
      volumes?: string[];
      networks?: string[];

      constraints {
        conflicts build with image;
        validate exists(ports) ? environment.NODE_ENV != "test" : true;
      };
    };
  };

  volumes?: { *: {}; };
  networks?: {
    *: {
      driver?: "bridge" | "overlay";
      external?: boolean;
    };
  };
}</code></pre>
        </div>
      </div>

      <div class="note">
        Features used: wildcard keys (<code class="inline">*:</code>), unions, regex annotations, and a <code class="inline">constraints</code> block.
      </div>
    </section>

    <!-- GitHub Actions -->
    <section class="example" id="ex-gh" data-active="false" aria-labelledby="tab-gh">
      <h2 style="margin: 1.4rem 0 0.25rem; letter-spacing:-0.02em;">GitHub Actions</h2>
      <p style="margin:0; color: var(--muted); font-weight: 650;">
        Validate mutually exclusive fields (<code class="inline">uses</code> vs <code class="inline">run</code>) inside steps.
      </p>

      <div class="split">
        <div class="panel" data-copy-scope>
          <div class="hdr">
            <span>Typical workflow YAML</span>
            <button class="button small secondary" type="button" data-copy-btn>Copy</button>
          </div>
          <pre><code data-copy-text>name: CI
on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: npm test</code></pre>
        </div>

        <div class="panel" data-copy-scope>
          <div class="hdr">
            <span>CSL schema</span>
            <button class="button small secondary" type="button" data-copy-btn>Copy</button>
          </div>
          <pre><code data-copy-text>config GitHubActions {
  name?: string;

  on: string | string[] | {
    push?: { branches?: string[] };
    pull_request?: { paths?: string[] };
  };

  env?: { *: string | number; };

  jobs: {
    *: { // Job names
      runs-on: "ubuntu-latest" | "macos-latest" | "windows-latest";
      needs?: string[];
      steps: {
        name?: string;
        uses?: string @regex("^actions/");
        run?: string;
        with?: { *: string | number | boolean; };

        constraints {
          validate exists(uses) || exists(run);
          conflicts uses with run;
          validate uses ? with : true;
        };
      }[];
    };
  };
}</code></pre>
        </div>
      </div>

      <div class="note">
        The key trick is scoping constraints inside the <code class="inline">steps</code> object so they apply per-step, consistently.
      </div>
    </section>

    <!-- AWS CFN -->
    <section class="example" id="ex-aws" data-active="false" aria-labelledby="tab-aws">
      <h2 style="margin: 1.4rem 0 0.25rem; letter-spacing:-0.02em;">AWS CloudFormation</h2>
      <p style="margin:0; color: var(--muted); font-weight: 650;">
        Use <code class="inline">any{}</code> for flexible resource properties while keeping the outer structure strict.
      </p>

      <div class="split">
        <div class="panel" data-copy-scope>
          <div class="hdr">
            <span>Sample template excerpt</span>
            <button class="button small secondary" type="button" data-copy-btn>Copy</button>
          </div>
          <pre><code data-copy-text>Resources:
  MyBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: my-app-bucket
      AccessControl: Private</code></pre>
        </div>

        <div class="panel" data-copy-scope>
          <div class="hdr">
            <span>CSL schema</span>
            <button class="button small secondary" type="button" data-copy-btn>Copy</button>
          </div>
          <pre><code data-copy-text>config CloudFormation {
  Resources: {
    *: { // Resource names
      Type: string @start_with("AWS::");
      Properties: any{};
      DependsOn?: string | string[];
      Metadata?: any{};

      constraints {
        validate Type == "AWS::S3::Bucket" ?
          Properties.BucketName @regex("^[a-z0-9-]+$") :
          true;
      };
    };
  };

  Parameters?: {
    *: {
      Type: "String" | "Number" | "List<Number>";
      Default?: string | number;
      AllowedValues?: any[];
    };
  };

  Outputs?: {
    *: {
      Value: string;
      Export?: { Name: string };
    };
  };
}</code></pre>
        </div>
      </div>

      <div class="note">
        This pattern keeps CloudFormation’s “huge surface area” manageable while still catching obvious mistakes early.
      </div>
    </section>

    <section style="padding: 1.2rem 0 0;">
      <div class="hero" style="padding: 1.2rem 1.2rem 1.1rem;">
        <h2 style="margin:0; letter-spacing:-0.02em;">Have another example?</h2>
        <p style="margin-top:0.45rem;">
          If you’ve written a schema for a real config format, we’d love to see it.
        </p>
        <div style="margin-top: 1rem; display:flex; gap: 0.7rem; flex-wrap: wrap;">
          <a class="button" href="https://github.com/nullptr-0/csl" target="_blank" rel="noopener">Contribute on GitHub</a>
          <a class="button secondary" href="./docs.html">Read the language spec</a>
        </div>
      </div>
    </section>

    <footer>
      <div class="footer-card">
        <div>
          <strong>CSL</strong> • Apache 2.0 • © 2025
          <div style="font-weight: 700; margin-top: 0.25rem;">Built by nullptr-0.</div>
        </div>
        <div class="footer-links">
          <a href="./index.html">Home</a>
          <a href="./docs.html">Docs</a>
          <a href="https://github.com/nullptr-0/csl" target="_blank" rel="noopener">GitHub</a>
          <a href="https://github.com/nullptr-0/csl/issues" target="_blank" rel="noopener">Issues</a>
        </div>
      </div>
    </footer>
  </main>

  <script>
    function toggleMenu(btn){
      const nav = document.getElementById("navLinks");
      const open = nav.getAttribute("data-open") === "true";
      nav.setAttribute("data-open", String(!open));
      btn.setAttribute("aria-expanded", String(!open));
    }

    function showExample(which, btn){
      const map = { docker: "ex-docker", gh: "ex-gh", aws: "ex-aws" };

      // panels
      document.querySelectorAll(".example").forEach(e => e.setAttribute("data-active", "false"));
      document.getElementById(map[which]).setAttribute("data-active", "true");

      // tabs
      document.querySelectorAll(".tab").forEach(t => t.setAttribute("aria-selected", "false"));
      btn.setAttribute("aria-selected", "true");

      // close mobile nav
      const nav = document.getElementById("navLinks");
      nav.setAttribute("data-open","false");
      const hb = document.querySelector(".hamburger");
      if (hb) hb.setAttribute("aria-expanded","false");
    }

    // Copy buttons
    (function initCopy(){
      const scopes = document.querySelectorAll("[data-copy-scope]");
      scopes.forEach(scope=>{
        const btn = scope.querySelector("[data-copy-btn]");
        const code = scope.querySelector("[data-copy-text]");
        if (!btn || !code) return;
        btn.addEventListener("click", async ()=>{
          const text = code.textContent || "";
          try{
            await navigator.clipboard.writeText(text);
            const prev = btn.textContent;
            btn.textContent = "Copied!";
            btn.disabled = true;
            setTimeout(()=>{ btn.textContent = prev; btn.disabled = false; }, 950);
          }catch(e){
            // Fallback
            const range = document.createRange();
            range.selectNodeContents(code);
            const sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
            document.execCommand("copy");
            sel.removeAllRanges();
          }
        });
      });
    })();
  </script>
</body>
</html>
